{"status":{},"contains_secrets":true,"product_version":"3.4.0","spec":{"description":"CentOS Small\n\n2vCPU\n\n4GB RAM\n\n100GB Storage\n\nIf Floating IP was Requested: @@{Linux VM.FloatingIP}@@\n\n\n\nCreated for dsta\n","resources":{"client_attrs":{"a990bdff_deployment":{"y":538,"x":1017},"None":{"y":538,"x":1017},"a7cfb836_deployment":{"y":538,"x":1017},"c9c73e31_deployment":{"y":538,"x":1017}},"service_definition_list":[{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Linux VM"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Floating IP"},{"kind":"app_task","name":"Set Private Repo"}],"name":"6411e926_dag","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"Floating IP"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"Set Private Repo"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Linux VM"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Floating IP","attrs":{"exit_status":[],"script":"def get_az_external_subnet_uuid(az_pc_ip,az_pc_username,az_pc_password,external_subnet_name):\n  api_url = 'https:\/\/' + az_pc_ip + ':9440\/api\/nutanix\/v3\/subnets\/list'\n  headers = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n  \n  payload = {\n      'kind': 'subnet'\n  }\n  \n  r = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False, auth=\"BASIC\" ,user=az_pc_username, passwd=az_pc_password)\n  if r.ok:\n    resp = json.loads(r.content)\n  else:\n    print(\"Function get_az_external_subnet_uuid Post Request Failed\", r.content)\n    exit(1)\n  \n  for subnet in resp['entities']:\n    if subnet['spec']['name'] == external_subnet_name:\n      #print(subnet['metadata']['uuid'])\n      return subnet['metadata']['uuid']\n\ndef getVmNicUuid(AzPC_IP,username,password,vmName):\n    api_url = 'https:\/\/' + AzPC_IP + ':9440\/api\/nutanix\/v3\/vms\/list'\n    headers = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n    payload = {\n        \"kind\": \"vm\",\n        \"filter\": \"vm_name=={}\".format(vmName)\n    }\n\n    r = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False, auth=\"BASIC\", user=username, passwd=password)\n    if r.ok:\n        resp = json.loads(r.content)\n        print(resp['entities'][0]['status']['resources']['nic_list'][0]['uuid'])\n        return resp['entities'][0]['status']['resources']['nic_list'][0]['uuid']\n      \ndef assignFloatingIp(AzPC_IP,username,password,vmNicUuid,VpcExternal_subnet_reference):\n\n    api_url = 'https:\/\/' + AzPC_IP + ':9440\/api\/nutanix\/v3\/floating_ips'\n    headers = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n    payload = {\n        \"spec\": {\n            \"resources\": {\n                \"vm_nic_reference\": {\n                    \"kind\": \"vm_nic\",\n                    \"uuid\": vmNicUuid\n                },\n                \"external_subnet_reference\": {\n                    \"kind\": \"subnet\",\n                    \"uuid\": VpcExternal_subnet_reference\n                }\n            }\n        },\n        \"api_version\": \"3.1.0\",\n        \"metadata\": {\n            \"kind\": \"floating_ip\"\n        }\n    }\n    \n    r = urlreq(api_url, verb='POST', params=json.dumps(payload), headers=headers, verify=False, auth=\"BASIC\", user=username, passwd=password)\n    if r.ok:\n        resp = json.loads(r.content)\n        task_uuid = resp['status']['execution_context']['task_uuid']\n\n    else:\n        print(\"Post request failed\", r.content)\n        exit(1)\n\n    state = \"\"\n    while state != \"SUCCEEDED\":\n        api_url = 'https:\/\/' + AzPC_IP + ':9440\/api\/nutanix\/v3\/tasks\/{}'.format(task_uuid)\n\n        sleep(2)\n        r = urlreq(api_url, verb='GET', params=json.dumps(payload), headers=headers, verify=False, auth=\"BASIC\", user=username, passwd=password)\n        if r.ok:\n            resp = json.loads(r.content)\n            state = resp['status']\n            print(resp)\n            if state == \"FAILED\":\n                print(\"Task failed\", resp['progress_message'])\n                exit(1)\n\n        else:\n            print(\"Post request failed\", r.content)\n            exit(1)\n    \n    floatingIpUuid = resp['entity_reference_list'][0]['uuid']\n\n    api_url = 'https:\/\/' + AzPC_IP + ':9440\/api\/nutanix\/v3\/floating_ips\/{}'.format(floatingIpUuid)\n\n    r = urlreq(api_url, verb='GET', params=json.dumps(payload), headers=headers, verify=False, auth=\"BASIC\", user=username, passwd=password)\n    if r.ok:\n        resp = json.loads(r.content)\n        floatingIpAddress = resp['status']['resources']['floating_ip']\n        return floatingIpAddress\n      \n      \n      \nif \"@@{Floating_IP}@@\" == \"Yes\":\n  az_pc_ip = \"@@{PC_IP}@@\"\n  az_pc_username = \"@@{PrismCentral.username}@@\"\n  az_pc_password = \"@@{PrismCentral.secret}@@\"\n  externalSubnetName = \"@@{ExternalSubnetName}@@\"\n  vmName = \"@@{name}@@\"\n  externalSubnetUuid = get_az_external_subnet_uuid(az_pc_ip,az_pc_username,az_pc_password,externalSubnetName)\n  vmNicUuid = getVmNicUuid(az_pc_ip,az_pc_username,az_pc_password,vmName)\n  FloatingIP = assignFloatingIp(az_pc_ip,az_pc_username,az_pc_password,vmNicUuid,externalSubnetUuid)\n  print(\"FloatingIP={}\".format(FloatingIP))\n\n\n\nelse:\n  print(\"Floating IP Not Required\")\n  exit(0)","eval_variables":["FloatingIP"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Linux VM"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Set Private Repo","attrs":{"exit_status":[],"script":"#!\/bin\/bash -e\n\nsudo mkdir \/etc\/containers\/\nsudo rm -f \/etc\/yum.repos.d\/*.repo\necho '''[baseos]\nname=CentOS-$releasever - Base\nbaseurl=http:\/\/172.16.101.190\/repos\/centos\/$releasever\/$basearch\/os\/baseos\/\ngpgcheck=1\nenabled=1\ngpgkey=file:\/\/\/etc\/pki\/rpm-gpg\/RPM-GPG-KEY-centosofficial''' | sudo tee \/etc\/yum.repos.d\/CentOS-Base.repo\n\necho '''[appstream]\nname=CentOS-$releasever - appstream\nbaseurl=http:\/\/172.16.101.190\/repos\/centos\/$releasever\/$basearch\/os\/appstream\/\ngpgcheck=1\nenabled=1\ngpgkey=file:\/\/\/etc\/pki\/rpm-gpg\/RPM-GPG-KEY-centosofficial''' | sudo tee \/etc\/yum.repos.d\/CentOS-appstream.repo\n\necho '''[extras]\nname=CentOS-$releasever - Extras\nbaseurl=http:\/\/172.16.101.190\/repos\/centos\/$releasever\/$basearch\/os\/extras\/\ngpgcheck=1\nenabled=1\ngpgkey=file:\/\/\/etc\/pki\/rpm-gpg\/RPM-GPG-KEY-centosofficial''' | sudo tee \/etc\/yum.repos.d\/CentOS-Extras.repo\n\necho '''\n[[registry]]\nlocation = \"image-registry.infra.dsta.local\"\ninsecure = true\n''' | sudo tee \/etc\/containers\/registries.conf","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"centos_root"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"f88cc02b_runbook","main_task_local_reference":{"kind":"app_task","name":"6411e926_dag"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Linux VM"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"29a2bda6_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"c941f919_runbook","main_task_local_reference":{"kind":"app_task","name":"29a2bda6_dag"},"variable_list":[]},"name":"action_delete"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Linux VM"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"250b10c1_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"ca23fe43_runbook","main_task_local_reference":{"kind":"app_task","name":"250b10c1_dag"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Linux VM"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"c76dfaf6_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"1c7b2f1b_runbook","main_task_local_reference":{"kind":"app_task","name":"c76dfaf6_dag"},"variable_list":[]},"name":"action_stop"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Linux VM"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"7bfee090_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"5da14716_runbook","main_task_local_reference":{"kind":"app_task","name":"7bfee090_dag"},"variable_list":[]},"name":"action_restart"}],"depends_on_list":[],"name":"Linux VM","port_list":[],"tier":"","variable_list":[{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"FloatingIP","value":"","label":"","attrs":{"type":""},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}}],"description":""}],"substrate_definition_list":[{"description":"","action_list":[{"description":"","type":"fragment","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"LinuxVM_az1"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"91d3c0e7_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"b28e448f_runbook","main_task_local_reference":{"kind":"app_task","name":"91d3c0e7_dag"},"variable_list":[]},"name":"pre_action_create"},{"description":"","type":"fragment","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"LinuxVM_az1"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"67d882b5_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"a4ce1f76_runbook","main_task_local_reference":{"kind":"app_task","name":"67d882b5_dag"},"variable_list":[]},"name":"post_action_delete"}],"type":"AHV_VM","name":"LinuxVM_az1","readiness_probe":{"connection_type":"SSH","retries":"5","connection_protocol":"","connection_port":22,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"30","disable_readiness_probe":false,"login_credential_local_reference":{"kind":"app_credential","name":"centos_root"}},"editables":{"create_spec":{"resources":{"nic_list":{"0":{"subnet_reference":true,"vpc_reference":true}},"num_vcpus_per_socket":true,"memory_size_mib":true,"disk_list":{"1":{"disk_size_mib":true}}},"categories":true}},"os_type":"Linux","create_spec":{"name":"@@{Hostname}@@","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","vpc_reference":null,"ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"df3824f3-611d-4d67-abdf-0deef917df82"},"type":""}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":2,"gpu_list":[],"memory_size_mib":4096,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":{"cloud_init":{"meta_data":"","type":"","user_data":"#cloud-config\n# vim:syntax=yaml\ndebug: True\nssh_pwauth: True\ndisable_root: false\nchpasswd:\n  list: |\n    root:nutanix\/4u\n  expire: false\nruncmd:\n- sed -i'.orig' -e's\/without-password\/yes\/' \/etc\/ssh\/sshd_config\n- service sshd restart"},"type":"","sysprep":null},"power_state":"ON","type":"","account_uuid":"1da3b7dc-646a-457e-aad0-066b25ed75ac","boot_config":{"boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"type":"","boot_type":"LEGACY","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"CentOS-8-GenericCloud","uuid":"13fb06b6-7f34-4685-b525-66adc6c53a50"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"}},{"data_source_reference":null,"type":"","disk_size_mib":102400,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":1,"adapter_type":"SCSI"},"device_type":"DISK"}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":{"kind":"cluster","type":"","name":"SGNTNXWLPE_AZ01","uuid":"0005d285-3508-9822-4991-3cecef176e2d"},"categories":{"Async_Protection_3AZ":"Home_AZ1"}},"variable_list":[]},{"description":"","action_list":[{"description":"","type":"fragment","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"LinuxVM_az2"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"91d3c0e7_dag_cloned_1","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"b28e448f_runbook_cloned_0","main_task_local_reference":{"kind":"app_task","name":"91d3c0e7_dag_cloned_1"},"variable_list":[]},"name":"pre_action_create"},{"description":"","type":"fragment","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"LinuxVM_az2"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"67d882b5_dag_cloned_1","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"a4ce1f76_runbook_cloned_0","main_task_local_reference":{"kind":"app_task","name":"67d882b5_dag_cloned_1"},"variable_list":[]},"name":"post_action_delete"}],"type":"AHV_VM","name":"LinuxVM_az2","readiness_probe":{"connection_type":"SSH","retries":"5","connection_protocol":"","connection_port":22,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"30","disable_readiness_probe":false,"login_credential_local_reference":{"kind":"app_credential","name":"centos_root"}},"editables":{"create_spec":{"resources":{"nic_list":{"0":{"subnet_reference":true,"vpc_reference":true}},"num_vcpus_per_socket":true,"memory_size_mib":true,"disk_list":{"1":{"disk_size_mib":true}}}}},"os_type":"Linux","create_spec":{"name":"@@{Hostname}@@","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","vpc_reference":null,"ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"1c0b470c-cab1-46f3-b8ab-9b2792219eed"},"type":""}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":2,"gpu_list":[],"memory_size_mib":4096,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":{"cloud_init":{"meta_data":"","type":"","user_data":"#cloud-config\n# vim:syntax=yaml\ndebug: True\nssh_pwauth: True\ndisable_root: false\nchpasswd:\n  list: |\n    root:nutanix\/4u\n  expire: false\nruncmd:\n- sed -i'.orig' -e's\/without-password\/yes\/' \/etc\/ssh\/sshd_config\n- service sshd restart"},"type":"","sysprep":null},"power_state":"ON","type":"","account_uuid":"060a08e8-fed9-4a2f-aba3-be07faa8506f","boot_config":{"boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"type":"","boot_type":"LEGACY","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"CentOS-8-GenericCloud","uuid":"483ca6bd-b30f-41f7-a3d2-20ca3ce78c53"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"}},{"data_source_reference":null,"type":"","disk_size_mib":102400,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":1,"adapter_type":"SCSI"},"device_type":"DISK"}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":{"kind":"cluster","type":"","name":"SGNTNXWLPE_AZ02","uuid":"0005d285-4a33-b1d4-1ebd-ac1f6b3b4778"},"categories":{"Async_Protection_3AZ":"Home_AZ2"}},"variable_list":[]},{"description":"","action_list":[{"description":"","type":"fragment","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"LinuxVM_az3"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"91d3c0e7_dag_cloned_1_cloned_1","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"b28e448f_runbook_cloned_0_cloned_0","main_task_local_reference":{"kind":"app_task","name":"91d3c0e7_dag_cloned_1_cloned_1"},"variable_list":[]},"name":"pre_action_create"},{"description":"","type":"fragment","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_substrate","name":"LinuxVM_az3"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"67d882b5_dag_cloned_1_cloned_1","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"a4ce1f76_runbook_cloned_0_cloned_0","main_task_local_reference":{"kind":"app_task","name":"67d882b5_dag_cloned_1_cloned_1"},"variable_list":[]},"name":"post_action_delete"}],"type":"AHV_VM","name":"LinuxVM_az3","readiness_probe":{"connection_type":"SSH","retries":"5","connection_protocol":"","connection_port":22,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"30","disable_readiness_probe":false,"login_credential_local_reference":{"kind":"app_credential","name":"centos_root"}},"editables":{"create_spec":{"resources":{"num_vcpus_per_socket":true,"memory_size_mib":true,"disk_list":{"1":{"disk_size_mib":true}}}}},"os_type":"Linux","create_spec":{"name":"@@{Hostname}@@","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","vpc_reference":null,"ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"76ae0867-e5e7-4433-b369-8a547a25f99f"},"type":""}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":2,"gpu_list":[],"memory_size_mib":4096,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":{"cloud_init":{"meta_data":"","type":"","user_data":"#cloud-config\n# vim:syntax=yaml\ndebug: True\nssh_pwauth: True\ndisable_root: false\nchpasswd:\n  list: |\n    root:nutanix\/4u\n  expire: false\nruncmd:\n- sed -i'.orig' -e's\/without-password\/yes\/' \/etc\/ssh\/sshd_config\n- service sshd restart"},"type":"","sysprep":null},"power_state":"ON","type":"","account_uuid":"2182ed65-a52a-45c7-a0d3-7235c88bf404","boot_config":{"boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"type":"","boot_type":"LEGACY","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"CentOS-8-GenericCloud","uuid":"3a953968-0a15-4287-8b26-a8dee0234b08"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"}},{"data_source_reference":null,"type":"","disk_size_mib":102400,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":1,"adapter_type":"SCSI"},"device_type":"DISK"}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":{"kind":"cluster","type":"","name":"SGNTNXWLPE_AZ03","uuid":"0005d285-182d-ccb2-0000-0000000158f9"},"categories":{"Async_Protection_3AZ":"Home_AZ3"}},"variable_list":[]}],"credential_definition_list":[{"username":"root","description":"","type":"PASSWORD","secret":{"attrs":{"is_secret_modified":true,"secret_reference":{}},"value":"qkxyGnJVQ4Cei\/L\/ycYBFUjbMbET53fgNloYDpBEZSJm6ZzMF56EwL39:utf-8"},"name":"centos_root","cred_class":"static"},{"username":"admin","description":"","type":"PASSWORD","secret":{"attrs":{"is_secret_modified":true,"secret_reference":{}},"value":"euN2POBYswbK5C0dxyoCT43wa9Qolhydi45VEBP4h67Im1ajTLYzNtR1:utf-8"},"name":"PrismCentral","cred_class":"static"}],"package_definition_list":[{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"Linux VM"}],"name":"Package1","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Package1"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Install Task"}],"name":"447d66c4_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Linux VM"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Install Task","attrs":{"exit_status":[],"script":"echo \"HelloWorld\"\ndate\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"centos_root"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"c6de5613_runbook","main_task_local_reference":{"kind":"app_task","name":"447d66c4_dag"},"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Package1"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"b5eaea69_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"a95ce560_runbook","main_task_local_reference":{"kind":"app_task","name":"b5eaea69_dag"},"variable_list":[]}},"variable_list":[]},{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"Linux VM"}],"name":"Package1_cloned_0","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Package1_cloned_0"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"447d66c4_dag_cloned_1","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"c6de5613_runbook_cloned_0","main_task_local_reference":{"kind":"app_task","name":"447d66c4_dag_cloned_1"},"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Package1_cloned_0"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"b5eaea69_dag_cloned_1","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"a95ce560_runbook_cloned_0","main_task_local_reference":{"kind":"app_task","name":"b5eaea69_dag_cloned_1"},"variable_list":[]}},"variable_list":[]},{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"Linux VM"}],"name":"Package1_cloned_0_cloned_0","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Package1_cloned_0_cloned_0"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"447d66c4_dag_cloned_1_cloned_1","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"c6de5613_runbook_cloned_0_cloned_0","main_task_local_reference":{"kind":"app_task","name":"447d66c4_dag_cloned_1_cloned_1"},"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Package1_cloned_0_cloned_0"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"b5eaea69_dag_cloned_1_cloned_1","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"a95ce560_runbook_cloned_0_cloned_0","main_task_local_reference":{"kind":"app_task","name":"b5eaea69_dag_cloned_1_cloned_1"},"variable_list":[]}},"variable_list":[]},{"description":"","action_list":[],"type":"SUBSTRATE_IMAGE","service_local_reference_list":[],"name":"CentOS","version":"","options":{"type":"","name":"http:\/\/172.16.101.188\/images\/openshift\/CentOS-8-GenericCloud-8.4.2105-20210603.0.x86_64.qcow2","resources":{"image_type":"DISK_IMAGE","checksum":{"checksum_algorithm":"","type":"","checksum_value":""},"source_uri":"http:\/\/172.16.101.188\/images\/openshift\/CentOS-8-GenericCloud-8.4.2105-20210603.0.x86_64.qcow2","version":{"product_version":"8.4","type":"","product_name":"CentOS8"},"architecture":"X86_64","type":""},"description":""},"variable_list":[]}],"app_profile_list":[{"deployment_create_list":[{"type":"GREENFIELD","action_list":[],"name":"a7cfb836_deployment","min_replicas":"1","default_replicas":"1","depends_on_list":[],"published_service_local_reference_list":[],"max_replicas":"1","package_local_reference_list":[{"kind":"app_package","name":"Package1"}],"substrate_local_reference":{"kind":"app_substrate","name":"LinuxVM_az1"},"variable_list":[],"description":""}],"environment_reference_list":[],"patch_list":[],"description":"","action_list":[],"name":"AZ1","restore_config_list":[],"snapshot_config_list":[],"variable_list":[{"val_type":"STRING","is_mandatory":false,"description":"External Subnet for Floating IP","data_type":"BASE","type":"LOCAL","name":"ExternalSubnetName","value":"Internal VLAN 107","label":"","attrs":{"type":""},"editables":{"value":false},"is_hidden":true,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"PC_IP","value":"172.16.101.10","label":"","attrs":{"type":"LOCAL"},"editables":{"value":false},"is_hidden":true,"options":{"type":"PREDEFINED","choices":[]}},{"regex":{"should_validate":false,"value":"^.*$"},"val_type":"STRING","is_mandatory":true,"description":"Select Yes to assign a Floating IP\n","data_type":"BASE","type":"LOCAL","name":"Floating_IP","value":"No","label":"","attrs":{"type":"LOCAL"},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":["Yes","No"]}},{"val_type":"STRING","is_mandatory":true,"description":"","data_type":"BASE","type":"LOCAL","name":"Hostname","value":"","label":"","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}}]},{"deployment_create_list":[{"type":"GREENFIELD","action_list":[],"name":"a990bdff_deployment","min_replicas":"1","default_replicas":"1","depends_on_list":[],"published_service_local_reference_list":[],"max_replicas":"1","package_local_reference_list":[{"kind":"app_package","name":"Package1_cloned_0"}],"substrate_local_reference":{"kind":"app_substrate","name":"LinuxVM_az2"},"variable_list":[],"description":""}],"environment_reference_list":[],"patch_list":[],"description":"","action_list":[],"name":"AZ2","restore_config_list":[],"snapshot_config_list":[],"variable_list":[{"val_type":"STRING","is_mandatory":false,"description":"External Subnet for Floating IP","data_type":"BASE","type":"LOCAL","name":"ExternalSubnetName","value":"Internal VLAN 107","label":"","attrs":{"type":""},"editables":{"value":false},"is_hidden":true,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"PC_IP","value":"172.16.101.20","label":"","attrs":{"type":"LOCAL"},"editables":{"value":false},"is_hidden":true,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":true,"description":"Select Yes to assign a Floating IP\n","data_type":"BASE","type":"LOCAL","name":"Floating_IP","value":"No","label":"","attrs":{"type":"LOCAL"},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":["Yes","No"]}},{"val_type":"STRING","is_mandatory":true,"description":"","data_type":"BASE","type":"LOCAL","name":"Hostname","value":"","label":"","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}}]},{"deployment_create_list":[{"type":"GREENFIELD","action_list":[],"name":"c9c73e31_deployment","min_replicas":"1","default_replicas":"1","depends_on_list":[],"published_service_local_reference_list":[],"max_replicas":"1","package_local_reference_list":[{"kind":"app_package","name":"Package1_cloned_0_cloned_0"}],"substrate_local_reference":{"kind":"app_substrate","name":"LinuxVM_az3"},"variable_list":[],"description":""}],"environment_reference_list":[],"patch_list":[],"description":"","action_list":[],"name":"AZ3","restore_config_list":[],"snapshot_config_list":[],"variable_list":[{"val_type":"STRING","is_mandatory":false,"description":"External Subnet for Floating IP","data_type":"BASE","type":"LOCAL","name":"ExternalSubnetName","value":"Internal VLAN 107","label":"","attrs":{"type":""},"editables":{"value":false},"is_hidden":true,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"PC_IP","value":"172.16.101.30","label":"","attrs":{"type":"LOCAL"},"editables":{"value":false},"is_hidden":true,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":true,"description":"","data_type":"BASE","type":"LOCAL","name":"Hostname","value":"","label":"","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":true,"description":"Select Yes to assign a Floating IP\n","data_type":"BASE","type":"LOCAL","name":"Floating_IP","value":"No","label":"","attrs":{"type":"LOCAL"},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":["Yes","No"]}}]}],"published_service_definition_list":[],"default_credential_local_reference":{"kind":"app_credential","name":"centos_root"},"type":"USER"},"name":"CentOS"},"api_version":"3.0","metadata":{"last_update_time":"1638924657383949","kind":"blueprint","spec_version":9,"creation_time":"1638891364389100","name":"CentOS"}}